--- Creation de la table LIVREUR :
DROP TABLE IF EXISTS LIVREUR CASCADE;

CREATE TABLE LIVREUR (
    ID INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    NOM CHAR(20) NOT NULL,
    PRENOM CHAR(20) NOT NULL,
    TELEPHONE CHAR(16) NOT NULL,
    NUMERO CHAR(30) NOT NULL,
    DISPONIBLE BOOLEAN DEFAULT TRUE,
    ARCHIVAGE DATE DEFAULT NULL
);

INSERT INTO LIVREUR (
    NOM,
    PRENOM,
    TELEPHONE,
    NUMERO
) VALUES (
    'GARCIA',
    'Carlos',
    '01 02 03 04 16',
    '1 04 07 71 014 248 46'
),
(
    'FERNANDEZ',
    'Luis',
    '01 02 03 04 17',
    '1 04 07 71 014 248 47'
),
(
    'RODRIGUEZ',
    'Javier',
    '01 02 03 04 18',
    '1 04 07 71 014 248 48'
),
(
    'LOPEZ',
    'Miguel',
    '01 02 03 04 19',
    '1 04 07 71 014 248 49'
),
(
    'MARTINEZ',
    'Jose',
    '01 02 03 04 20',
    '1 04 07 71 014 248 50'
),
(
    'SANCHEZ',
    'Manuel',
    '01 02 03 04 21',
    '1 04 07 71 014 248 51'
);

--- Creation de la table COMMANDE :
DROP TABLE IF EXISTS COMMANDE CASCADE;

CREATE TABLE COMMANDE (
    ID INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    NOM CHAR(25) NOT NULL,
    TELEPHONE CHAR(20) NOT NULL,
    ADRESSE CHAR(30) DEFAULT NULL,
    CODE_POSTAL CHAR(5) DEFAULT NULL,
    VILLE CHAR(20) DEFAULT NULL,
    DATE DATE NOT NULL,
    HEURE_DISPONIBILITE TIME NOT NULL,
    TYPE_EMBALLAGE VARCHAR(10) NOT NULL DEFAULT 'C',
    A_LIVRER BOOLEAN NOT NULL DEFAULT TRUE,
    ETAT_COMMANDE CHAR(15) NOT NULL DEFAULT 'Acceptee',
    ETAT_LIVRAISON CHAR(20) DEFAULT 'preparation',
    COUT_LIVRAISON FLOAT DEFAULT NULL,
    TOTAL_TTC FLOAT DEFAULT NULL,
    ARCHIVAGE DATE DEFAULT NULL,
    ID_LIVREUR INT DEFAULT NULL,
    CONSTRAINT FOREIGN_KEY_ID_LIVREUR FOREIGN KEY (ID_LIVREUR) REFERENCES LIVREUR (ID)
);

INSERT INTO COMMANDE (
    NOM,
    TELEPHONE,
    ADRESSE,
    CODE_POSTAL,
    VILLE,
    DATE,
    HEURE_DISPONIBILITE,
    TYPE_EMBALLAGE,
    A_LIVRER,
    ETAT_COMMANDE,
    ETAT_LIVRAISON,
    COUT_LIVRAISON,
    TOTAL_TTC,
    ARCHIVAGE,
    ID_LIVREUR
) VALUES (
    'DUPONT',
    '01 02 03 04 05',
    '18 rue de la Paix',
    '75000',
    'PARIS',
    '2024-06-26',
    '12:10:00',
    'Sac',
    TRUE,
    'Acceptee',
    'preparation',
    5,
    10,
    '2024-06-26',
    1
),
(
    'DURAND',
    '01 02 03 04 06',
    '18 rue de la Paix',
    '75000',
    'PARIS',
    '2024-06-26',
    '12:12:00',
    'Sac',
    TRUE,
    'Acceptee',
    'fin_preparation',
    5,
    10,
    NULL,
    2
),
(
    'MARTIN',
    '01 02 03 04 07',
    '18 rue de la Paix',
    '75000',
    'PARIS',
    '2024-06-26',
    '12:05:00',
    'Sac',
    TRUE,
    'Acceptee',
    'livree',
    5,
    10,
    NULL,
    3
),
(
    'DUPONT',
    '01 02 03 04 05',
    '18 rue de la Paix',
    '75000',
    'PARIS',
    '2024-06-26',
    '20:10:00',
    'Sac',
    TRUE,
    'Acceptee',
    'preparation',
    5,
    10,
    NULL,
    1
);

--- Creation de la table PRODUIT :
DROP TABLE IF EXISTS PRODUIT CASCADE;

CREATE TABLE PRODUIT (
    ID INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    NOM CHAR(30) NOT NULL,
    ACTIF BOOLEAN NOT NULL,
    TAILLE CHAR(2) NOT NULL,
    NOMBRE_INGREDIENT_BASE INT NOT NULL,
    NOMBRE_INGREDIENT_OPTIONNEL INT DEFAULT NULL,
    PRIX_UHT FLOAT NOT NULL,
    IMAGE CHAR(50) DEFAULT NULL,
    INGREDIENT_BASE_1 CHAR(20) NOT NULL,
    INGREDIENT_BASE_2 CHAR(20) DEFAULT NULL,
    INGREDIENT_BASE_3 CHAR(20) DEFAULT NULL,
    INGREDIENT_BASE_4 CHAR(20) DEFAULT NULL,
    INGREDIENT_BASE_5 CHAR(20) DEFAULT NULL,
    INGREDIENT_BASE_6 CHAR(20) DEFAULT NULL,
    INGREDIENT_OPTIONNEL_1 CHAR(20) DEFAULT NULL,
    INGREDIENT_OPTIONNEL_2 CHAR(20) DEFAULT NULL,
    INGREDIENT_OPTIONNEL_3 CHAR(20) DEFAULT NULL,
    INGREDIENT_OPTIONNEL_4 CHAR(20) DEFAULT NULL,
    ARCHIVAGE DATE DEFAULT NULL
);

INSERT INTO PRODUIT (
    NOM,
    ACTIF,
    TAILLE,
    NOMBRE_INGREDIENT_BASE,
    NOMBRE_INGREDIENT_OPTIONNEL,
    PRIX_UHT,
    IMAGE,
    INGREDIENT_BASE_1,
    INGREDIENT_BASE_2,
    INGREDIENT_BASE_3,
    INGREDIENT_BASE_4,
    INGREDIENT_BASE_5,
    INGREDIENT_BASE_6
) VALUES (
    'Crepe Suzette',
    TRUE,
    'M',
    3.75,
    6,
    0,
    'chemin_image',
    'Crepe',
    'Sucre',
    'Beurre',
    'Cognac',
    'Orange',
    'Grand-Marnier'
);

INSERT INTO PRODUIT (
    NOM,
    ACTIF,
    TAILLE,
    NOMBRE_INGREDIENT_BASE,
    NOMBRE_INGREDIENT_OPTIONNEL,
    PRIX_UHT,
    IMAGE,
    INGREDIENT_BASE_1,
    INGREDIENT_BASE_2,
    INGREDIENT_BASE_3,
    INGREDIENT_BASE_4,
    INGREDIENT_BASE_5,
    INGREDIENT_OPTIONNEL_1,
    INGREDIENT_OPTIONNEL_2
) VALUES (
    'Crepe Kebab',
    TRUE,
    'L',
    5.75,
    5,
    2,
    'chemin_image',
    'Crepe',
    'Agneau',
    'Oignon Rouge',
    'Tomate',
    'Frites',
    'Sauce blanche',
    'Sauce piquante'
);

INSERT INTO PRODUIT (
    NOM,
    ACTIF,
    TAILLE,
    NOMBRE_INGREDIENT_BASE,
    NOMBRE_INGREDIENT_OPTIONNEL,
    PRIX_UHT,
    IMAGE,
    INGREDIENT_BASE_1,
    INGREDIENT_BASE_2,
    INGREDIENT_BASE_3,
    INGREDIENT_BASE_4,
    INGREDIENT_OPTIONNEL_1
) VALUES (
    'Gallete JAMBON',
    TRUE,
    'XL',
    7.21,
    4,
    1,
    'chemin_image',
    'Galette',
    'JAMBON',
    'Emmental',
    'Oeuf',
    'Champignon'
);

--- Cration de la table DETAIL :
DROP TABLE IF EXISTS DETAIL CASCADE;

CREATE TABLE DETAIL (
    ID INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    NOM CHAR(30) NOT NULL,
    INGREDIENT_BASE_1 CHAR(20) NOT NULL,
    INGREDIENT_BASE_2 CHAR(20) DEFAULT NULL,
    INGREDIENT_BASE_3 CHAR(20) DEFAULT NULL,
    INGREDIENT_BASE_4 CHAR(20) DEFAULT NULL,
    INGREDIENT_BASE_5 CHAR(20) DEFAULT NULL,
    INGREDIENT_BASE_6 CHAR(20) DEFAULT NULL,
    INGREDIENT_OPTIONNEL_1 CHAR(20) DEFAULT NULL,
    INGREDIENT_OPTIONNEL_2 CHAR(20) DEFAULT NULL,
    INGREDIENT_OPTIONNEL_3 CHAR(20) DEFAULT NULL,
    INGREDIENT_OPTIONNEL_4 CHAR(20) DEFAULT NULL,
    ARCHIVAGE DATE DEFAULT NULL,
    ID_PRODUIT INT NOT NULL,
    CONSTRAINT FOREIGN_KEY_ID_PRODUIT FOREIGN KEY (ID_PRODUIT) REFERENCES PRODUIT (ID)
);

INSERT INTO DETAIL (
    NOM,
    INGREDIENT_BASE_1,
    INGREDIENT_BASE_2,
    INGREDIENT_BASE_3,
    INGREDIENT_BASE_4,
    INGREDIENT_OPTIONNEL_1,
    ID_PRODUIT
) VALUES (
    'Galette JAMBON',
    'Galette',
    'JAMBON',
    'Emmental',
    'Oeuf',
    'Champignon',
    3
);

INSERT INTO DETAIL (
    NOM,
    INGREDIENT_BASE_1,
    INGREDIENT_BASE_2,
    INGREDIENT_BASE_3,
    INGREDIENT_BASE_4,
    ID_PRODUIT
) VALUES (
    'Galette Jambon',
    'Galette',
    'Jambon',
    'Emmental',
    'Oeuf',
    3
);

INSERT INTO DETAIL (
    NOM,
    INGREDIENT_BASE_1,
    INGREDIENT_BASE_2,
    INGREDIENT_BASE_3,
    INGREDIENT_BASE_4,
    INGREDIENT_BASE_5,
    INGREDIENT_BASE_6,
    ID_PRODUIT
) VALUES (
    'Crepe Suzette',
    'Crepe',
    'Sucre',
    'Beurre',
    'Cognac',
    'Orange',
    'Grand-Marnier',
    1
);

INSERT INTO DETAIL (
    NOM,
    INGREDIENT_BASE_1,
    INGREDIENT_BASE_2,
    INGREDIENT_BASE_3,
    INGREDIENT_BASE_4,
    INGREDIENT_BASE_5,
    INGREDIENT_OPTIONNEL_1,
    INGREDIENT_OPTIONNEL_2,
    ID_PRODUIT
) VALUES (
    'Crepe Kebab',
    'Crepe',
    'Agneau',
    'Oignon Rouge',
    'Tomate',
    'Frites',
    'Sauce blanche',
    'Sauce piquante',
    2
);

--- Creation de la table FOURNISSEUR :
DROP TABLE IF EXISTS FOURNISSEUR CASCADE;

CREATE TABLE FOURNISSEUR (
    ID CHAR(30) PRIMARY KEY NOT NULL,
    ADRESSE CHAR(50) NOT NULL,
    CODE_POSTAL CHAR(5) NOT NULL,
    VILLE CHAR(20) NOT NULL,
    TELEPHONE CHAR(20) NOT NULL,
    ARCHIVAGE DATE DEFAULT NULL
);

INSERT INTO FOURNISSEUR (
    ID,
    ADRESSE,
    CODE_POSTAL,
    VILLE,
    TELEPHONE
) VALUES (
    'ALDI CENTRALE D''ACHAT ET CIE',
    '527, rue Clément Ader, Parc d''activité de la Goële',
    '77230',
    'Dammartin-en-Goële',
    '09 77 40 40 44'
),
(
    'Carrefour France',
    'ZI Route de Paris',
    '14120',
    'MONDEVILLE',
    '02 31 70 60 88'
),
(
    'DISTRIBUTION CASINO FRANCE',
    '1 cours Antoine Guichard Cedex 2',
    '42008',
    'Saint Etienne',
    '39 31'
);

--- Creation de la table INGREDIENT :
DROP TABLE IF EXISTS INGREDIENT CASCADE;

CREATE TABLE INGREDIENT (
    ID INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    NOM CHAR(30) NOT NULL,
    FRAIS BOOLEAN DEFAULT FALSE,
    UNITE CHAR(10) NOT NULL,
    SEUIL_STOCK FLOAT NOT NULL DEFAULT '1',
    STOCK_MINI FLOAT NOT NULL,
    STOCK_REEL FLOAT NOT NULL,
    PRIX_UHT_MOYEN FLOAT NOT NULL,
    QUANTITE_A_COMMANDER INT NOT NULL,
    ARCHIVAGE DATE DEFAULT NULL
);

INSERT INTO INGREDIENT (
    NOM,
    UNITE,
    STOCK_MINI,
    STOCK_REEL,
    PRIX_UHT_MOYEN,
    QUANTITE_A_COMMANDER
) VALUES (
    'SUCRE',
    'kg',
    5,
    5,
    1.30,
    5
),
(
    'BEURRE',
    'Kg',
    1,
    1,
    15.86,
    1
),
(
    'COGNAC',
    'L',
    1,
    1,
    61.42,
    1
),
(
    'ORANGE',
    'UNITE',
    10,
    10,
    0.452,
    10
),
(
    'GRAND-MARNIER',
    'L',
    1,
    1,
    30,
    1
),
(
    'AGNEAU',
    'Kg',
    3,
    3,
    10.80,
    1
),
(
    'OIGNON ROUGE',
    'Kg',
    2,
    2,
    3.12,
    5
),
(
    'TOMATE',
    'Kg',
    2,
    2,
    2.57,
    5
),
(
    'POMMES DE TERRE',
    'Kg',
    5,
    5,
    1.50,
    5
),
(
    'JAMBON',
    'Kg',
    2,
    2,
    6.85,
    1
),
(
    'EMMENTAL',
    'Kg',
    5,
    5,
    13.23,
    5
),
(
    'OEUF',
    'DOUZAINE',
    4,
    4,
    4.58,
    1
),
(
    'CHAMPIGNON',
    'Kg',
    0.5,
    0.5,
    8.07,
    1
),
(
    'HUILE',
    'L',
    5,
    5,
    8.60,
    1
),
(
    'FARINE',
    'Kg',
    5,
    5,
    1.25,
    3
),
(
    'LAIT',
    'L',
    5,
    5,
    1.22,
    1
);

--- Creation de la table GERANT :
DROP TABLE IF EXISTS GERANT CASCADE;

CREATE TABLE GERANT (
    ID INT PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    NOM CHAR(20) NOT NULL,
    PRENOM CHAR(20) NOT NULL,
    TELEPHONE CHAR(16) NOT NULL
);

INSERT INTO GERANT (
    NOM,
    PRENOM,
    TELEPHONE
) VALUES (
    'BOUDON',
    'Owen',
    '06 38 04 54 22'
),
(
    'FERREIRA PIAIA',
    'Fernando',
    '06 24 59 58 12'
);

--- Creation de la table DETAIL_COMMANDE  :
DROP TABLE IF EXISTS DETAIL_COMMANDE CASCADE;

CREATE TABLE IF NOT EXISTS DETAIL_COMMANDE (
    ID_DETAIL INT PRIMARY KEY NOT NULL,
    ID_COMMANDE INT NOT NULL,
    QUANTITE INT NOT NULL,
    CONSTRAINT FOREIGN_KEY_ID_DETAIL FOREIGN KEY (ID_DETAIL) REFERENCES DETAIL (ID),
    CONSTRAINT FOREIGN_KEY_ID_COMMANDE FOREIGN KEY (ID_COMMANDE) REFERENCES COMMANDE (ID)
);

INSERT INTO DETAIL_COMMANDE (
    ID_DETAIL,
    ID_COMMANDE,
    QUANTITE
) VALUES (
    1,
    1,
    2
),
(
    2,
    2,
    5
),
(
    3,
    3,
    1
),
(
    4,
    1,
    3
);

--- Creation de la table FOURNISSEUR_INGREDIENT :
DROP TABLE IF EXISTS DETAIL_INGREDIENT CASCADE;

CREATE TABLE DETAIL_INGREDIENT (
    ID_DETAIL INT NOT NULL,
    ID_INGREDIENT INT NOT NULL,
    CONSTRAINT ID_DETAIL_INGREDIENT PRIMARY KEY (ID_DETAIL, ID_INGREDIENT),
    CONSTRAINT FOREIGN_KEY_ID_DETAIL FOREIGN KEY (ID_DETAIL) REFERENCES DETAIL (ID),
    CONSTRAINT FOREIGN_KEY_ID_INGREDIENT FOREIGN KEY (ID_INGREDIENT) REFERENCES INGREDIENT (ID)
);

INSERT INTO DETAIL_INGREDIENT (
    ID_DETAIL,
    ID_INGREDIENT
) VALUES (
    1,
    10
),
(
    1,
    11
),
(
    1,
    12
),
(
    2,
    10
),
(
    2,
    11
),
(
    2,
    12
),
(
    3,
    1
),
(
    3,
    2
),
(
    3,
    3
),
(
    3,
    4
),
(
    3,
    5
),
(
    4,
    6
),
(
    4,
    7
),
(
    4,
    8
),
(
    4,
    9
);

--- Creation de la table FOURNISSEUR_INGREDIENT :
DROP TABLE IF EXISTS FOURNISSEUR_INGREDIENT CASCADE;

CREATE TABLE FOURNISSEUR_INGREDIENT (
    ID_FOURNISSEUR CHAR(30) NOT NULL,
    ID_INGREDIENT INT NOT NULL,
    PRIX_UHT FLOAT NOT NULL,
    CONSTRAINT ID_FOURNISSEUR_INGREDIENT PRIMARY KEY (ID_FOURNISSEUR, ID_INGREDIENT),
    CONSTRAINT FOREIGN_KEY_ID_FOURNISSEUR FOREIGN KEY (ID_FOURNISSEUR) REFERENCES FOURNISSEUR (ID),
    CONSTRAINT FOREIGN_KEY_ID_INGREDIENT FOREIGN KEY (ID_INGREDIENT) REFERENCES INGREDIENT (ID)
);

INSERT INTO FOURNISSEUR_INGREDIENT (
    ID_FOURNISSEUR,
    ID_INGREDIENT,
    PRIX_UHT
) VALUES (
    'ALDI CENTRALE D''ACHAT ET CIE',
    1,
    1.30
),
(
    'ALDI CENTRALE D''ACHAT ET CIE',
    2,
    15.86
),
(
    'ALDI CENTRALE D''ACHAT ET CIE',
    3,
    61.42
),
(
    'ALDI CENTRALE D''ACHAT ET CIE',
    4,
    0.452
),
(
    'ALDI CENTRALE D''ACHAT ET CIE',
    5,
    30
),
(
    'Carrefour France',
    6,
    10.80
),
(
    'Carrefour France',
    7,
    3.12
),
(
    'Carrefour France',
    8,
    2.57
),
(
    'Carrefour France',
    9,
    1.50
),
(
    'Carrefour France',
    10,
    6.85
),
(
    'Carrefour France',
    11,
    13.23
),
(
    'Carrefour France',
    12,
    4.58
),
(
    'Carrefour France',
    13,
    8.07
),
(
    'Carrefour France',
    14,
    8.60
),
(
    'DISTRIBUTION CASINO FRANCE',
    15,
    1.25
),
(
    'DISTRIBUTION CASINO FRANCE',
    16,
    1.22
);

--- Creation de la table PRODUIT_INGREDIENT :
DROP TABLE IF EXISTS PRODUIT_INGREDIENT CASCADE;

CREATE TABLE PRODUIT_INGREDIENT (
    ID_INGREDIENT INT NOT NULL,
    ID_PRODUIT INT NOT NULL,
    QUANTITE INT NOT NULL,
    CONSTRAINT ID_PRODUIT_INGREDIENT PRIMARY KEY (ID_INGREDIENT, ID_PRODUIT),
    CONSTRAINT FOREIGN_KEY_ID_INGREDIENT FOREIGN KEY (ID_INGREDIENT) REFERENCES INGREDIENT (ID),
    CONSTRAINT FOREIGN_KEY_ID_PRODUIT FOREIGN KEY (ID_PRODUIT) REFERENCES PRODUIT (ID)
);

INSERT INTO PRODUIT_INGREDIENT (
    ID_PRODUIT,
    ID_INGREDIENT,
    QUANTITE
) VALUES (
    1,
    1,
    0.5
),
(
    1,
    2,
    0.1
),
(
    1,
    3,
    0.01
),
(
    1,
    4,
    0.25
),
(
    1,
    5,
    0.01
),
(
    2,
    6,
    0.2
),
(
    2,
    7,
    0.1
),
(
    2,
    8,
    0.1
),
(
    2,
    9,
    0.5
),
(
    3,
    10,
    0.2
),
(
    3,
    11,
    0.3
),
(
    3,
    12,
    1
),
(
    3,
    13,
    0.2
);